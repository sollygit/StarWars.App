<app-page-layout>
  <div class="content-layout">
    <mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>
    <div class="content__body">
      <mat-card *ngIf="item" (ngModel)="item" class="card">
        <mat-card-header>
          <mat-card-title>{{item.title}}</mat-card-title>
          <mat-card-subtitle>${{item.price}} / {{item.year}} / <a [routerLink]="['/movies/edit', item.id]" class="vertical-mid">{{ item.id }}</a>
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <img src="{{ item.poster }}" alt="poster" />
        </mat-card-content>
      </mat-card>
      <mat-card *ngIf="item && item.movieRatings && item.movieRatings.length > 0" class="card">
        <mat-card-header>
          <mat-card-title>Ratings</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <table class="table table-bordred table-striped table-hover">
            <thead>
              <tr>
                <th>Rated</th>
                <th>Released</th>
                <th>Runtime</th>
                <th>Genre</th>
                <th>Director</th>
                <th>Language</th>
                <th>Metascore</th>
                <th>Rating</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let rating of item.movieRatings">
                <td>{{ rating.rated }}</td>
                <td>{{ rating.released | date }}</td>
                <td>{{ rating.runtime }}</td>
                <td>{{ rating.genre }}</td>
                <td>{{ rating.director }}</td>
                <td>{{ rating.language }}</td>
                <td>{{ rating.metascore }}</td>
                <td>{{ rating.rating }}</td>
              </tr>
            </tbody>
          </table>
        </mat-card-content>
      </mat-card>
      <pre *ngIf="!item">{{ message }}</pre>
      <a [routerLink]="['/movies']" class="btn btn-primary">Back to List</a>
    </div>
  </div>
</app-page-layout>